<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>チームマッチングアプリ</title>
  <!-- Vue CDN -->
  <script src="https://cdn.jsdelivr.net/npm/vue@3.2/dist/vue.global.js"></script>
  <!-- Firebase CDN -->
  <script src="https://www.gstatic.com/firebasejs/8.1.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.1.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.1.0/firebase-auth.js"></script>
  <!-- Leaflet.js CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <!-- Leaflet.js JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- スタイル -->
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
  <script charset="utf-8">/**
* js_common.js
*/

      get select domain from ssl pages
    var re = /\/user\/ssl/ig;
    if (re.test(location.href) == true) {
      var select_domain = String(localStorage.getItem("da:app/domain")).trim();
      if (select_domain && select_domain.length !== 0) {
        select_domain = select_domain.replace(/\"/g, '');//remove "
        var url = '/CMD_SSL?json=yes&domain=' + select_domain + '&dnsproviders=yes&ipp=50';
        $.ajax({
          url,
          success: function (data) {
          },
          error: function (data) {
            window.location.href = '/user/domains';
          }
        });
      }
    }

    calStorage.setItem("evolution:dark-mode", "disable");

      document).ready(function () {
      '.root-preloader > img').attr('src', '/_assets/img/preloader.svg');
    ;

      html replace setting
      r PROXY_HTML_REPLACES = new Array();
       SSL lets encrypt
    PROXY_HTML_REPLACES.push({
      'uri': '/user/ssl/server',
      'select': 'div.inputCheck-label',
      'search': 'Create your own self signed certificate', 'replace': '自己署名証明書を作成'
    });
    OXY_HTML_REPLACES.push({ 'uri': '/user/password', 'select': '#root > div > div.app-content > main > section > article > section:nth-child(2) > div:nth-child(1) > div > label > span', 'search': 'Current DirectAdmin Password:', 'replace': '現在のパスワード：' });
    OXY_HTML_REPLACES.push({ 'uri': '/user/plugins/jetbackup5', 'select': 'title', 'search': 'DirectAdmin ', 'replace': '' });

    OXY_HTML_REPLACES.push({ 'uri': '/user/dns/mx-records', 'select': '#root > div > div.app-content > main > section > article > section:nth-child(3) > header > h2 > span', 'search': 'オプション', 'replace': 'メール配送設定' });
    OXY_HTML_REPLACES.push({ 'uri': '/user/dns/mx-records', 'select': '#root > div > div.app-content > main > section > article > section:nth-child(3) > div:nth-child(2) > div > div.formElement-content > label > div > div.inputCheck-label > span', 'search': 'Use this server to handle my e-mails. If not, change the MX records and uncheck this option.', 'replace': '他サーバーでメールを運用する場合はチェックを外します。このサーバーでメールを運用する場合はチェックする必要があります。' });




      css modify setting
      r PROXY_CSS_REPLACES = new Array();


    PROXY_CSS_REPLACES.push({ 'uri': '*', 'select': '#root > div > div.app-content > main > section > article > header.app-page-header', 'css': ['margin-top', '0px'] });
    OXY_CSS_REPLACES.push({ 'uri': '*', 'select': '#root > div > div > header', 'css': ['display', 'none'] });
    OXY_CSS_REPLACES.push({ 'uri': '*', 'select': '#i_header_links', 'css': ['display', 'none'] });
    OXY_CSS_REPLACES.push({ 'uri': '*', 'select': '#root > div > div.app-content > div', 'css': ['display', 'none'] });
    OXY_CSS_REPLACES.push({ 'uri': '*', 'select': '#root > div > div.app-content > main > section > div > div > div.filters-bar', 'css': ['display', 'none'] });
    OXY_CSS_REPLACES.push({ 'uri': '/user/dns', 'select': 'nav > button', 'css': ['display', 'block'] });
    OXY_CSS_REPLACES.push({ 'uri': '/user/dns/mx-records', 'select': 'header > div', 'css': ['display', 'block'] });
    OXY_CSS_REPLACES.push({ 'uri': '/user/dns/mx-records', 'select': 'header > div > nav', 'css': ['display', 'block'] });
    OXY_CSS_REPLACES.push({ 'uri': '/user/dns/mx-records', 'select': 'header > div > nav > button', 'css': ['display', 'block'] });



    domainselect
      r _setting_domain = '';

      *
      他に特別な処理が有る場合は適時追記していく

    function () {

         jetbackup 不正URL制御
      r = location.href;
         = /\/user\/plugins\/jetbackup5/ig;
      (re.test(str) == true && getParam('path') != "index.html") {
        cation.href = "/user/plugins/jetbackup5?path=index.html";
        turn;
        

        window).on("click", function (e) {
          r str = location.href;
          r re = /\/CMD_FILE_MANAGER.*/ig;
          (re.test(str) == true) {
            'body > div.q-menu.q-position-engine.scroll > div > a').remove();
        ;

        ;

      nction getParam(name, url) {
          (!url) url = window.location.href;
          me = name.replace(/[\[\]]/g, "\\$&");
        r regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            sults = regex.exec(url);
          (!results) return null;
          (!results[2]) return '';
        turn decodeURIComponent(results[2].replace(/\+/g, " "));
      
      nction _check_table_dkmi() {
            '.input-checkbox').hide();
            '#records-table > div > div.r-table-buttons-before').hide();
            '#records-table > div > div.relative.mb-4.inline-flex.justify-end.overflow-y-hidden.p-1').hide();
            '#root > div > div > main > section > article > header > div > nav.app-page-header-buttons').hide();
            x._domainkey のレコード以外を非表示
        r list = $('#records-table > div > div > table > tbody.q-virtual-scroll__content');
            st.find('tr');
        r count = list.find('tr').length;
            r(var i = 0; i < count; i++) {
          r _text = list.find('tr').eq(i).find('td').eq(1).find('div').text();
              ext = _text.trim();
              console.log('text', _text)
                (_text != 'x._domainkey') {
                st.find('tr').eq(i).hide();
                (_text == 'x._domainkey') {
                  st.find('tr').eq(i).show();
                  '#records-table').show();
                  '#records-table > div > div > table > tbody.q-virtual-scroll__content').show();
      
      nction _email_add_admin_view_btn() {
        r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
        r _back_btn = _btn.find('span').find('span');
                    r(var i = 0; i < _back_btn.length; i++) {
          r t = $(_back_btn[i]).text();
          = t.trim();
                      (t == '加入者を追加') {
            t back = $(_back_btn[i]).parent().parent();
                        ck.show();
                        
      nction _enable_hotlink_btn() {
        r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
        r _back_btn = _btn.find('span').find('span');
                          r(var i = 0; i < _back_btn.length; i++) {
          r t = $(_back_btn[i]).text();
          = t.trim();
                            (t == '直リンク保護を無効' || t == '直リンク保護を有効' || t == '選択中のドメインを追加') {
            t back = $(_back_btn[i]).parent().parent();
                              ck.show();
                        
      nction _enable_create_db_btn() {
        r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
        r _back_btn = _btn.find('span').find('span');
                                r(var i = 0; i < _back_btn.length; i++) {
          r t = $(_back_btn[i]).text();
          = t.trim();
                                  (t == 'Create New Database') {
            t back = $(_back_btn[i]).parent().parent();
                                    ck.show();

                                    /evo/user / profile
      nction _disable_ad_db() {
                                      console.log('/evo/user/profile');
                                      '#root > div > div.app-content.flex.w-full.flex-col > main > section > article > div:nth-child(2)').hide();
                                      '#root > div > div.app-content.flex.w-full.flex-col > main > section > article > div:nth-child(6)').hide();
                                      '#root > div > div.app-content.flex.w-full.flex-col > main > section > article > div:nth-child(8)').hide();
                                      '#root > div > div.app-content.flex.w-full.flex-col > main > section > article > hr:nth-child(5)').hide();
                                      '#root > div > div.app-content.flex.w-full.flex-col > main > section > article > hr:nth-child(7)').hide();
                                      $('#root > div > div > main > section > article > div:nth-child(4)').hide();
        r checkboxs = $.find('.input-checkbox');
                                      ($(checkboxs[0]).attr('class') == 'input-checkbox --checked') {
                                        checkboxs[0]).click();
                                        checkboxs[0]).hide();
                                        ($(checkboxs[2]).attr('class') == 'input-checkbox --checked') {
                                          checkboxs[2]).click();
                                          checkboxs[2]).hide();

                                          以下変更不要

                                            *
                                            init

                                          function () {
                                            '.app-page-header-navigation').hide();
                                            tTimeout(function () {
                                              s_change();
                                              place_html();
                                              t_js_filter();
                                              1000)
                                              ;


      nction back_button_hide() {
        r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
        r _back_btn = _btn.find('span').find('span');
                                              r(var i = 0; i < _back_btn.length; i++) {
          r t = $(_back_btn[i]).text();
          = t.trim();
                                                (t == '戻る') {
            t back = $(_back_btn[i]).parent().parent();
                                                  ck.hide();
                                                  $('body > div.app > div.app-content > main > section > article > header > h1 > button').hide();
      
      nction display_mx_records() {
                                                    console.log('mx-records---');
                                                    ($('#tether-host').find('div').length > 0) {
                                                      tTimeout(function () {
                                                        'main > section > article > section:nth-child(4)').hide();
                                                      'main > section > article > section:nth-child(2)').hide();
                                                      'main > section > article > section:nth-child(4)').hide();
                                                      'main > section > article > section:nth-child(3) > div > div > div> div > div').show();
                                                      1)
        else {
                                                        'main > section > article > section').show();
                                                        'main > section > article > section:nth-child(3) > div > div > div> div > div').show();
                                                        'main > section > article > section:nth-child(3) > div > div > div> div > div').show();
                                                        'main > section > article > section:nth-child(3) > div div > div> div > div').show();
                                                        'main > section > article > section:nth-child(4)').hide();
                                                        'main > section > article > section:nth-child(2)').hide();
                                                        'main > section > article > section:nth-child(4)').hide();
      
      *
                                                          common filter javascript
       
      nction ext_js_filter() {

                                                          ($('body>div.notyf').length > 0) {
                                                            console.log('notyf', $('body>div.notyf').length, $('body>div.notyf'));
                                                            console.log($('body>div.notyf').html());
          r html = $('body>div.notyf').html();
                                                            console.log(html);
          regexp h6 tag
          r re = /<h6>(.+)<\/h6>/ig;
          r result = html.match(re);
                                                            (result && result.length > 0) {
                                                              console.log('hit', result);
                                                              if find ロード string
            r re2 = /ロード/ig;
            t len = result.length;
                                                              r(let i = 0; i < len; i++) {
              r result2 = result[i].match(re2);
                                                                (result2 && result2.length > 0) {
                                                                  console.log('hit2', result2);
                                                                  'body>div.notyf>div').hide();
              else {
                                                                    'body>div.notyf>div').show();
                                    else {
                                                                      'body>div.notyf>div').show();

                                                                      'body').hide();
                                                                      'main').hide();
                                                                      'body').css('opacity', '0');
                                                                      'main').css('opacity', '0');

                                                                      ck_button_hide();
                                                                      '.app-page-header-navigation').show();
                                                                      'body > div.app > div.app-content > header > div > div.domainsDropdown > span').css('width', '5em');

        hide back_button
                                                                      $('#root > div > div > main > section > article > header > div > nav > button > span > span').each(function () {
                                                                        '#root > div > div > main > section > article > header > div > nav > button').each(function () {
          r t = $(this).find("span").text();
          r reg = new RegExp('戻る', 'ig');
          r ret = reg.test(t);
                                                                          (ret == true) {
                                                                            this).hide();
                                                                      ;
                                                                      '#root > div > div> main > section > article > header > div')
                                                                      ss('display', 'inline-flex')
                                                                      nimate({ opacity: "show" }, "slow");

                                                                      r = location.href;
         = /\/user\/stats/ig;
                                                                      (re.test(str) == true) {
                                                                        'div.ui-tabs-header > div.ui-tabs-header-tab').eq(2).remove();


                                                                        r = location.href;
         = /\/user\/stats\/usage/ig;
                                                                        (re.test(str) == true) {
                                                                          'div.app-page-header-navigation').remove();

                                                                          r = location.href;
         = /\/user\/stats\/webalizer/ig;
                                                                          (re.test(str) == true) {
                                                                            'div.app-page-header-navigation').remove();


                                                                            r = location.href;
         = /\/user\/stats\/(.+)\/statistics\/webalizer/ig;
                                                                            (re.test(str) == true) {
                                                                              'nav > button').show();

                                                                              r = location.href;
         = /\/user\/stats\/(.+)\/statistics\/awstats/ig;
                                                                              (re.test(str) == true) {
                                                                                'nav > button').show();

                                                                                r = location.href;
         = /\/user\/stats\/(.+)\/statistics\/webalizer\/awstats/ig;
                                                                                (re.test(str) == true) {
                                                                                  'nav > button').show();

                                                                                  str = location.href;
                                                                                  re = /\/user\/domains/ig;
                                                                                  if (re.test(str) == true) {
                                                                                    $('nav > button.-theme-primary').hide();
                                                                                  }

                                                                                  r = location.href;
         = /\/evo\/user\/domains/ig;
                                                                                  (re.test(str) == true) {
                                                                                    console.log('/evo/user/domains');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                    r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                      (t == '戻る' || t == 'ドメインの名前を変更') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                        ck.hide();
            else if (t == '新しく追加') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                          ck.show();

                                                                                          /evo/user / domains / add - domain
                                                                                          r = location.href;
         = /\evo\/user\/domains\/add\-domain/ig;
                                                                                          (re.test(str) == true) {
                                                                                            console.log('/evo/user/domains/add-domain');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                            r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                              (t == '戻る') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                ck.show();

                                                                                                r = location.href;
         = /\/user\/dns/ig;
                                                                                                (re.test(str) == true) {
                                                                                                  '#records-table').show();
                                                                                                  '#root > div > main > section> article > header > div > nav > button.button.-theme-neutral').hide();

                                                                                                  r = location.href;
         = /\/user\/dns\/mx-records/ig;
                                                                                                  (re.test(str) == true) {
                                                                                                    'header > div').css('display', 'flex');
                                                                                                    'header > div > nav').show();
                                                                                                    'nav > button').show();
                                                                                                    '#records-table').hide();
                                                                                                    'body > div > div.app-content > main > section > article > section:nth-child(3) > div:nth-child(3)').hide();
          t save = $('body > div > div.app-content > main > section > article > section:nth-child(3) > div');
                                                                                                    (save && save.length == 3) {
                                                                                                      console.log($(save[2]));
                                                                                                      save[2]).hide()

                                                                                                      r = location.href;
         = /\/user\/email\/create-account/ig;
                                                                                                      (re.test(str) == true) {
                                                                                                        'nav > button').show();


                                                                                                        r = location.href;
         = /\/evo\/user\/password/ig;
                                                                                                        (re.test(str) == true) {
                                                                                                          'nav > button').show();
                                                                                                          'header > div > nav.app-page-header-links').hide();
                                                                                                          ck_button_hide();
                                                                                                          let dacheckd = $('body > div.app > div.app-content > main > section > article > section:nth-child(2) > div:nth-child(3) > div > div > div > div:nth-child(1)')
          t dacheckd = $('#root > div > div > main > section > article > section:nth-child(2) > div:nth-child(3) > div > div > div > div > div:nth-child(1)');
                                                                                                          (dacheckd && dacheckd.attr('class') == 'input-checkbox --checked') {
                                                                                                            checkd.click();
                                                                                                            checkd.hide();
                                                                                                            let dbcheckd = $('body > div.app > div.app-content > main > section > article > section:nth-child(2) > div:nth-child(3) > div > div > div > div:nth-child(3)')
          t dbcheckd = $('#root > div > div > main > section > article > section:nth-child(2) > div:nth-child(3) > div > div > div > div > div:nth-child(3)');
                                                                                                            (dbcheckd && dbcheckd.attr('class') == 'input-checkbox --checked') {
                                                                                                              checkd.click();
                                                                                                              checkd.hide();
                                                                                                              $('#root > div > main > section > article > header > div > nav').hide();

                                                                                                              /evo/user / email / forwarders 未翻訳部分の翻訳
                                                                                                              r = location.href;
         = /\/evo\/user\/email\/forwarders/ig;
                                                                                                              (re.test(str) == true) {
          r fs = $('.Select__Dropdown__Items__Item').find();
          t c = fs.prevObject.length;
                                                                                                                r(var i = 0; c > i; i++) {
            r text = $(fs.prevObject[i]).find('span').text();
                                                                                                                  xt = text.trim();
                                                                                                                  (text == ':blackhole:') {
                                                                                                                    fs.prevObject[i]).find('span').text('ブラックホール');
                                                                                                                    (text == ':fail:') {
                                                                                                                      fs.prevObject[i]).find('span').text('失敗');

                                                                                                                      r = location.href;
         = /\/evo\/user\/ftp-accounts/ig;
                                                                                                                      (re.test(str) == true) {
                                                                                                                        console.log('/evo/user/ftp-accounts');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                        r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                          (t == 'FTPアカウントを作成') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                            ck.show();

                                                                                                                            /evo/user / ftp - accounts / create
                                                                                                                            r = location.href;
         = /\/evo\/user\/ftp-accounts\/create/ig;
                                                                                                                            (re.test(str) == true) {
                                                                                                                              console.log('/evo/user/ftp-accounts/create');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                              r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                (t == '戻る') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                  ck.show();

                                                                                                                                  /evo/user / handlers
                                                                                                                                  r = location.href;
         = /\/evo\/user\/handlers(.*)/ig;
                                                                                                                                  (re.test(str) == true) {
                                                                                                                                    console.log('/evo/user/handlers and more');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                    r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                      (t == 'ハンドラを作成') { // || t =='システムApacheハンドラ'
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                        ck.show();
            else if (t == 'システムApacheハンドラ') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                          ck.hide();
                              
         jetbackup ヘッダ削除
                                                                                                                                          r = location.href;
         = /\/user\/plugins\/jetbackup5/ig;
                                                                                                                                          (re.test(str) == true) {
                                                                                                                                            remove()すると動作不良になる
                                                                                                                                            '#plugin-host-header').hide();
                                                                                                                                            'header').hide();

                                                                                                                                            /evo/user / redirects
                                                                                                                                            r = location.href;
         = /\/evo\/user\/redirects/ig;
                                                                                                                                            (re.test(str) == true) {
                                                                                                                                              console.log('/evo/user/redirects');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                              r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                (t == '新しいリダイレクトを作成') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                  ck.show();

                                                                                                                                                  /evo/user / subdomains
                                                                                                                                                  r = location.href;
         = /\/evo\/user\/subdomains/ig;
                                                                                                                                                  (re.test(str) == true) {
                                                                                                                                                    console.log('/evo/user/subdomains');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                    r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                      (t == 'サブドメインを追加') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                        ck.show();

                                                                                                                                                        /evo/user / ssl / server
                                                                                                                                                        r = location.href;
         = /\/evo\/user\/ssl(.*)/ig;
                                                                                                                                                        (re.test(str) == true) {
                                                                                                                                                          console.log('/evo/user/ssl and more');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                          r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                            (t == 'SSLを無効' || t == 'SSL CA証明書') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                              ck.show();

                                                                                                                                                              /evo/user / email / accounts
                                                                                                                                                              r = location.href;
         = /\/evo\/user\/email\/accounts/ig;
                                                                                                                                                              (re.test(str) == true) {
                                                                                                                                                                console.log('/evo/user/email/accounts');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                  (t == 'アカウントを作成') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                    ck.show();

                                                                                                                                                                    /evo/user / email / forwarders
                                                                                                                                                                    r = location.href;
         = /\/evo\/user\/email\/forwarders/ig;
                                                                                                                                                                    (re.test(str) == true) {
                                                                                                                                                                      console.log('/evo/user/email/forwarders');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                      r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                        (t == 'Eメール転送先を作成') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                          ck.show();

                                                                                                                                                                          /evo/user / email / autoresponders
                                                                                                                                                                          r = location.href;
         = /\/evo\/user\/email\/autoresponders/ig;
                                                                                                                                                                          (re.test(str) == true) {
                                                                                                                                                                            console.log('/evo/user/email/autoresponders');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                            r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                              (t == '自動返信を作成') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                                ck.show();

                                                                                                                                                                                /evo/user / email / autoresponders / create
                                                                                                                                                                                r = location.href;
         = /\/evo\/user\/email\/autoresponders\/create/ig;
                                                                                                                                                                                (re.test(str) == true) {
                                                                                                                                                                                  console.log('/evo/user/email/autoresponders/create');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                                  r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                                    (t == '戻る') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                                      ck.show();

                                                                                                                                                                                      /evo/user / email / vacations
                                                                                                                                                                                      r = location.href;
         = /\/evo\/user\/email\/vacations/ig;
                                                                                                                                                                                      (re.test(str) == true) {
                                                                                                                                                                                        console.log('/evo/user/email/vacations');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                                        r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                                          (t == 'バケーションメッセージを設定') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                                            ck.show();
                                                                                                                                                                                            /evo/user / email / vacations / create
                                                                                                                                                                                            r = location.href;
         = /\/evo\/user\/email\/vacations\/create/ig;
                                                                                                                                                                                            (re.test(str) == true) {
                                                                                                                                                                                              console.log('/evo/user/vacations/create');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                                              r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                                                (t == '戻る') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                                                  ck.show();

                                                                                                                                                                                                  /evo/user / email / lists
                                                                                                                                                                                                  r = location.href;
         = /\/evo\/user\/email\/lists/ig;
                                                                                                                                                                                                  (re.test(str) == true) {
                                                                                                                                                                                                    console.log('/evo/user/email/lists');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                                                    r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                                                      (t == 'メーリングリストを作成') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                                                        ck.show();
                                                                                                                                                                                                        mail_add_admin_view_btn();

                                                                                                                                                                                                        /evo/user / hotlinks
                                                                                                                                                                                                        r = location.href;
         = /\/evo\/user\/hotlinks/ig;
                                                                                                                                                                                                        (re.test(str) == true) {
                                                                                                                                                                                                          nable_hotlink_btn();

                                                                                                                                                                                                          /evo/user / database
                                                                                                                                                                                                          r = location.href;
         = /\/evo\/user\/database/ig;
                                                                                                                                                                                                          (re.test(str) == true) {
                                                                                                                                                                                                            console.log('/evo/user/database');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                                                            r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                                                              (t == '新しいデータベースを作成') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                                                                ck.show();
                                                                                                                                                                                                                nable_create_db_btn();
                                                                                                                                                                                                                /evo/user / database / create
                                                                                                                                                                                                                r = location.href;
         = /\/evo\/user\/database\/create/ig;
                                                                                                                                                                                                                (re.test(str) == true) {
                                                                                                                                                                                                                  console.log('/evo/user/database/create');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                                                                  r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                                                                    (t == '戻る') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                                                                      ck.show();
                                                                                                                                                                                                                      nable_create_db_btn();

                                                                                                                                                                                                                      /evo/user / ssh - keys / public
                                                                                                                                                                                                                      r = location.href;
         = /\/evo\/user\/ssh-keys\/public/ig;
                                                                                                                                                                                                                      (re.test(str) == true) {
                                                                                                                                                                                                                        console.log('/evo/user/ssh-keys/public');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                                                                        r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                                                                          (t == 'キーを作成') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                                                                            ck.show();

                                                                                                                                                                                                                            /evo/user / cronjobs
                                                                                                                                                                                                                            r = location.href;
         = /\/evo\/user\/cronjobs/ig;
                                                                                                                                                                                                                            (re.test(str) == true) {
                                                                                                                                                                                                                              console.log('/evo/user/cronjobs');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                                                                              r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                                                                                (t == 'Cron Jobを作成') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                                                                                  ck.show();
                                                                                                                                                                                                                                  /evo/user / cronjobs / create
                                                                                                                                                                                                                                  r = location.href;
         = /\/evo\/user\/cronjobs\/create/ig;
                                                                                                                                                                                                                                  (re.test(str) == true) {
                                                                                                                                                                                                                                    console.log('/evo/user/cronjobs/create');
          r _btn = $('.app-page-header-navigation').find('.app-page-header-buttons').find('button');
          r _back_btn = _btn.find('span').find('span');
                                                                                                                                                                                                                                    r(var i = 0; i < _back_btn.length; i++) {
            r t = $(_back_btn[i]).text();
            = t.trim();
                                                                                                                                                                                                                                      (t == '戻る') {
              t back = $(_back_btn[i]).parent().parent();
                                                                                                                                                                                                                                        ck.show();

                                                                                                                                                                                                                                        /evo/user / email / lists / admins / view
                                                                                                                                                                                                                                        r = location.href;
         = /\/evo\/user\/email\/lists\/admins\/view/ig;
                                                                                                                                                                                                                                        (re.test(str) == true) {
                                                                                                                                                                                                                                          console.log('/evo/user/email/lists/admins/view');
                                                                                                                                                                                                                                          '#root > div > div > header > div > div> div > div > div > div > button').on('click', function (e) {
                                                                                                                                                                                                                                            mail_add_admin_view_btn();
                                                                                                                                                                                                                                            ;
                                                                                                                                                                                                                                            mail_add_admin_view_btn();

                                                                                                                                                                                                                                            /evo/user / profile
                                                                                                                                                                                                                                            r = location.href;
         = /\/evo\/user\/profile/ig;
                                                                                                                                                                                                                                            (re.test(str) == true) {
                                                                                                                                                                                                                                              isable_ad_db();
        
         ssl let'sencrypt ワイルドカード非表示
                                                                                                                                                                                                                                              r = location.href;
         = /\/user\/ssl\/letsencrypt/ig;
                                                                                                                                                                                                                                              (re.test(str) == true) {
                                                                                                                                                                                                                                                'div.inputGroup-right').remove();
        
        default email account not change password
                                                                                                                                                                                                                                          r = location.href;
         = /\/user\/email\/accounts/ig;
                                                                                                                                                                                                                                          (re.test(str) == true) {
                                                                                                                                                                                                                                            '.ui-actions').on('mouseup', function (e) {
                                                                                                                                                                                                                                              tTimeout(() => {
                                                                                                                                                                                                                                                ($('body > div > div > div > div > a:nth-child(1) > span').text() == 'パスワードを変更') {
                                                                                                                                                                                                                                                  'body > div > div > div > div > a:nth-child(1)').remove();
                                                                                                                                                                                                                                              40);
                                                                                                                                                                                                                                            ;

                                                                                                                                                                                                                                            r = location.href;
         = /\/user\/email\/vacations/ig;//vacations settings
                                                                                                                                                                                                                                            2 = /\/user\/email\/vacations\/create/ig;
                                                                                                                                                                                                                                            3 = /\/user\/hotlinks/ig;//直リンク保護 
                                                                                                                                                                                                                                            4 = /\/user\/php-settings/ig;//PHP設定
                                                                                                                                                                                                                                            5 = /\/user\/email\/catch-all/ig;//CatchAll設定
                                                                                                                                                                                                                                            6 = /\/user\/handlers/ig;//システムApacheのハンドラ
                                                                                                                                                                                                                                            7 = /\/user\/email\/spamassassin/ig;//メールスパムアサシン
                                                                                                                                                                                                                                            (re.test(str) == true || re2.test(str) == true || re3.test(str) == true || re4.test(str) == true
           re5.test(str) == true || re6.test(str) == true || re7.test(str) == true) {
                                                                                                                                                                                                                                              (_setting_domain == '') {
                                                                                                                                                                                                                                                etting_domain = $("#root > div > div > header > div > div> div > div > div > div > button > span.Select__Button__Label").text();
          else {
            r _current_setting_domain = $("#root > div > div > header > div > div> div > div > div > div > button > span.Select__Button__Label").text();
                                                                                                                                                                                                                                                  (_current_setting_domain != _setting_domain) {
                                                                                                                                                                                                                                                    etting_domain = _current_setting_domain;
                                                                                                                                                                                                                                                    tTimeout(function () {
                                                                                                                                                                                                                                                      cation.reload();
                                                                                                                                                                                                                                                      180);

                                                                                                                                                                                                                                                    r = location.href;
         = /\/user\/email\/spamassassin/ig;//spamassassin settings
                                                                                                                                                                                                                                                    (re.test(str) == true) {
                                                                                                                                                                                                                                                      '#root > div > div > main > section > article > header > div > nav.app-page-header-links > a').hide();

                                                                                                                                                                                                                                                      r = location.href;
         = /\/user\/dns\/mx-records/ig;
                                                                                                                                                                                                                                                      (re.test(str) == true) {
                                                                                                                                                                                                                                                        'main > section > article > header > div > nav.app-page-header-buttons > button > span').show();

                                                                                                                                                                                                                                                        r = location.href;
         = /\/user\/domains\/add\-domain/ig;
                                                                                                                                                                                                                                                        (re.test(str) == true) {
                                                                                                                                                                                                                                                          'main > section > article > header > div > nav.app-page-header-buttons > button > span').show();

                                                                                                                                                                                                                                                          ドメイン管理≫ドメインを選択≫ドメイン変更画面
                                                                                                                                                                                                                                                          r = location.href;
         = /\/user\/domains\/domain\/.+/ig
                                                                                                                                                                                                                                                            (re.test(str) == true) {
                                                                                                                                                                                                                                                            'main > section > article > header > div > nav.app-page-header-buttons > button > span').show();

                                                                                                                                                                                                                                                            FTP設定≫FTPアカウントの作成
                                                                                                                                                                                                                                                            r = location.href;
         = /\/user\/ftp\-accounts\/create/ig
                                                                                                                                                                                                                                                            2 = /\/evo\/user\/ftp\-accounts\/create/ig
                                                                                                                                                                                                                                                              (re.test(str) == true || re2.test(str) == true) {
                                                                                                                                                                                                                                                              'main > section > article > header > div > nav.app-page-header-buttons > button > span').show();

                                                                                                                                                                                                                                                              メールアカウント設定≫メールアカウントを作成
                                                                                                                                                                                                                                                              r = location.href;
         = /\/evo\/user\/email\/create-account/ig
                                                                                                                                                                                                                                                              2 = /\/user\/email\/create-account/ig
                                                                                                                                                                                                                                                                (re.test(str) == true || re2.test(str) == true) {
                                                                                                                                                                                                                                                                'main > section > article > header > div > nav.app-page-header-buttons > button > span').show();

                                                                                                                                                                                                                                                                アクセス統計≫ドメインを選択≫統計レポートを表示
                                                                                                                                                                                                                                                                  = /\/evo\/user\/stats\/.+\/statistics\/webalizer/ig;
                                                                                                                                                                                                                                                                r = location.href;
                                                                                                                                                                                                                                                                (re.test(str) == true) {
                                                                                                                                                                                                                                                                  'main > section > article > header > div > nav.app-page-header-buttons > button > span').show();

                                                                                                                                                                                                                                                                  /evo/user / dns
                                                                                                                                                                                                                                                                  r = location.href;
         = /\/evo\/user\/dns/ig;
                                                                                                                                                                                                                                                                  (re.test(str) == true) {
                                                                                                                                                                                                                                                                    '#root > div > div > header > div > div> div > div > div > div > button').on('click', function (e) {
                                                                                                                                                                                                                                                                      heck_table_dkmi();
                                                                                                                                                                                                                                                                      '#root > div > div > main > section > article > section').show();
                                                                                                                                                                                                                                                                    '#records-table').show();
                                                                                                                                                                                                                                                                    ;
                                                                                                                                                                                                                                                                    heck_table_dkmi();

                                                                                                                                                                                                                                                                    r = location.href;
         = /\/evo\/user\/dns\/mx-records/ig;
                                                                                                                                                                                                                                                                    (re.test(str) == true) {
                                                                                                                                                                                                                                                                      splay_mx_records();
        
        r homebt = $('body > div.app > div.app-content > main > section > article > header > div > nav.app-page-header-buttons > button > span > span.label-slot > span:nth-child(2)');
        r hometext = homebt.text();
                                                                                                                                                                                                                                                                      metext = hometext.trim();
                                                                                                                                                                                                                                                                      (hometext == 'ホームページに戻ります') {
                                                                                                                                                                                                                                                                        '.app-page-header-buttons').hide();


                                                                                                                                                                                                                                                                        r = location.href;
         = /\/CMD_FILE_MANAGER/ig;
                                                                                                                                                                                                                                                                        (re.test(str) == true) {
                                                                                                                                                                                                                                                                          '#q-app > div > div > div > header > div > a').hide();
                                                                                                                                                                                                                                                                          '#q-app > div > div > div > div.q-drawer-container > aside > div > aside > div:nth-child(3) > div').hide();
                                                                                                                                                                                                                                                                          '#q-portal--menu--1 > div > div > div:nth-child(9)').hide();
                                                                                                                                                                                                                                                                          '#q-portal--menu--2 > div > div > div:nth-child(9)').hide();
                                                                                                                                                                                                                                                                          '#q-portal--menu--3 > div > div > div:nth-child(9)').hide();
                                                                                                                                                                                                                                                                          '#q-portal--menu--4 > div > div > div:nth-child(9)').hide();
                                                                                                                                                                                                                                                                          '#q-portal--menu--5 > div > div > div:nth-child(9)').hide();
                                                                                                                                                                                                                                                                          '#q-portal--menu--6 > div > div > div:nth-child(9)').hide();
                                                                                                                                                                                                                                                                          '#q-portal--menu--7 > div > div > div:nth-child(9)').hide();
                                                                                                                                                                                                                                                                          '#q-portal--menu--8 > div > div > div:nth-child(9)').hide();
                                                                                                                                                                                                                                                                          '#q-portal--menu--9 > div > div > div:nth-child(9)').hide();


                                                                                                                                                                                                                                                                          '.header-logo').hide();
                                                                                                                                                                                                                                                                          '.userbar').hide();
                                                                                                                                                                                                                                                                          '.menu-trigger').hide();
                                                                                                                                                                                                                                                                          '.nav-grid-trigger').hide();

                                                                                                                                                                                                                                                                          '.menu-trigger').hide();
                                                                                                                                                                                                                                                                          '.nav-grid-trigger').hide();
                                                                                                                                                                                                                                                                          '.header-logo').remove();

                                                                                                                                                                                                                                                                          '#root > div > div > header').css({ 'display': 'block', 'height': 'auto', 'border': 'none', 'background-color': '#FFFFFF' });
                                                                                                                                                                                                                                                                          '#root > div > div > header > div').css('float', 'right');
                                                                                                                                                                                                                                                                          '.app-header').css('border-bottom', 'none');
                                                                                                                                                                                                                                                                          '.app-header').css('height', '6rem');
                                                                                                                                                                                                                                                                          'body').css('opacity', 1);
                                                                                                                                                                                                                                                                          'main').css('opacity', 1);
                                                                                                                                                                                                                                                                          'body').show();
                                                                                                                                                                                                                                                                          'main').show();
      

      *
                                                                                                                                                                                                                                                                            location change listener
       


      r denypaths = ["/", "/user/stats/account"];

      r href = location.href;
      r observer = new MutationObserver(function (mutations) {
                                                                                                                                                                                                                                                                              server.disconnect();
                                                                                                                                                                                                                                                                              (denypaths.includes(location.pathname)) {
                                                                                                                                                                                                                                                                                history.back();
                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                s_change();
                                                                                                                                                                                                                                                                                place_html();
                                                                                                                                                                                                                                                                                t_js_filter();
                                                                                                                                                                                                                                                                                server.observe(document, { childList: true, subtree: true });
                                                                                                                                                                                                                                                                                setTimeout(function () {
                                                                                                                                                                                                                                                                                  css_change();
                                                                                                                                                                                                                                                                                  replace_html();
                                                                                                                                                                                                                                                                                  ext_js_filter();
                                                                                                                                                                                                                                                                                  observer.observe(document, { childList: true, subtree: true });
                                                                                                                                                                                                                                                                                }, 500)
                                                                                                                                                                                                                                                                                  ;

                                                                                                                                                                                                                                                                                server.observe(document, { childList: true, subtree: true });




      *
                                                                                                                                                                                                                                                                                  html replace
       
      nction replace_html() {
        t c = PROXY_HTML_REPLACES.length;
                                                                                                                                                                                                                                                                                  r(var i = 0; i < c; i++) {
          r pattern = PROXY_HTML_REPLACES[i].uri;
          r str = location.href;
          r select = PROXY_HTML_REPLACES[i].select;

                                                                                                                                                                                                                                                                            (PROXY_HTML_REPLACES[i].uri == '*') {//all
            select).each(function () {
              r _html = $(this).html();
              r replace_html = _html.replace(new RegExp(PROXY_HTML_REPLACES[i].search, 'ig'), PROXY_HTML_REPLACES[i].replace);
                                                                                                                                                                                                                                                                              this).html(
                                                                                                                                                                                                                                                                                place_html
              
            ;
          else if (str.indexOf(pattern) > -1) {//uri mache
            select).each(function () {
              r _html = $(this).html();
              r replace_html = _html.replace(new RegExp(PROXY_HTML_REPLACES[i].search, 'ig'), PROXY_HTML_REPLACES[i].replace);
                                                                                                                                                                                                                                                                                  this).html(
                                                                                                                                                                                                                                                                                    place_html
              
            ;
                        
      *
                                                                                                                                                                                                                                                                                  css changer
       
      nction css_change() {
        t c = PROXY_CSS_REPLACES.length;
                                                                                                                                                                                                                                                                                  r(var i = 0; i < c; i++) {
          r pattern = PROXY_CSS_REPLACES[i].uri;
          r str = location.href;
          r select = PROXY_CSS_REPLACES[i].select;
                                                                                                                                                                                                                                                                                    (PROXY_CSS_REPLACES[i].uri == '*') {//all
            select).each(function () {
                                                                                                                                                                                                                                                                                      this).css(PROXY_CSS_REPLACES[i].css[0], PROXY_CSS_REPLACES[i].css[1]);
                                                                                                                                                                                                                                                                                      ;
          else if (str.indexOf(pattern) > -1) {//uri mache
            select).css(PROXY_CSS_REPLACES[i].css[0], PROXY_CSS_REPLACES[i].css[1]);
            select).each(function () {
                                                                                                                                                                                                                                                                                        this).css(PROXY_CSS_REPLACES[i].css[0], PROXY_CSS_REPLACES[i].css[1]);
                                                                                                                                                                                                                                                                                        ;
                                                                                                                                                                                                                                                                                      }
  </script>

  <style>
    #root>div>div.app-content>header {
      display: none;
    }

    #root>div>div.app-content>main>section>div>div>div.filters-bar {
      display: none;
    }

    #root>div>div.app-content>div {
      display: none;
    }

    #i_header_links {
      display: none;
    }

    #root>div>div>main>section>article>header>div {
      display: none;
    }

    #i_footer {
      display: none;
    }

    footer {
      display: none;
    }

    /*
#q-app > div > div > header > div > div.da-logo-wrapper.q-mx-md.q-my-sm.q-toolbar__title.ellipsis{
	display:none;
}
*/

    #maximizeToggle {
      display: none;
    }

    section.search {
      display: none;
    }

    #records-table,
    #records-table>div>div:nth-child(2)>div>div:nth-child(2)>button:nth-child(2) {
      display: none;
    }


    .menu-trigger {
      display: none;
    }

    .nav-grid-trigger {
      display: none;
    }

    .header-logo {
      display: none;
    }

    .userbar {
      display: none;
    }

    header>div>div.q-toolbar__title {
      display: none;
    }

    #q-app\ bg-primary>div>div>div.q-drawer-container>aside>div>aside>div:nth-child(1)>a {
      display: none;
    }

    #q-app\ bg-primary>div>div>header>div>a {
      display: none;
    }

    #root>div>div>main>section>article>header>h1>button {
      display: none;
    }

    .breadcrumbs {
      display: none;
    }

    .header-spacer {
      width: 100%;
    }

    .app-header {
      border-bottom: none;
      height: 6rem;
      display: none;
    }

    /* #root>div.app-content.width\:100\%.fx\:dir\:column>main>section>article>header>div>nav>button{display: none;} */
    #root>div.app-content.width\:100\%.fx\:dir\:column>main>section>article>header>div>nav>button.button.-theme-neutral.-size-big.cursor\:pointer {
      display: none;
    }

    #root>div.app-content.width\:100\%.fx\:dir\:column>header>div>div.domainsDropdown.fx\:dir\:row.fx\:cross\:center>span {
      width: 60px;
    }

    .header-logo {
      opacity: 0;
      background-image: none;
    }

    body,
    main {
      display: none;
      opacity: 0;
    }

    #root>div>main>section>article>header>h1>button {
      display: none;
    }

    /* body>div.notyf>div{ display: none; } */

    #q-app>div>div>div>div.q-drawer-container>aside>div>aside>div:nth-child(1)>a {
      display: none;
    }
  </style>

</head>


<style>
  /* リセット */
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  /* 全体のスタイル */
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'Lucida Grande', sans-serif;
    background-color: #f0f2f5;
    color: #333333;
    line-height: 1.6;
  }

  /* ナビゲーションバー */
  nav {
    background-color: #ffffff;
    padding: 15px 30px;
    border-bottom: 1px solid #e0e0e0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }

  nav .logo {
    font-size: 28px;
    font-weight: 700;
    color: #1e90ff;
    cursor: pointer;
    transition: color 0.3s;
  }

  nav .logo:hover {
    color: #1c86ee;
  }

  nav .nav-links button {
    background: none;
    border: none;
    color: #1e90ff;
    font-size: 16px;
    cursor: pointer;
    margin-left: 20px;
    transition: color 0.3s, transform 0.3s;
    display: flex;
    align-items: center;
  }

  nav .nav-links button i {
    margin-right: 8px;
  }

  nav .nav-links button:hover {
    color: #1c86ee;
    transform: scale(1.05);
  }

  /* ヘッダー */
  header {
    background-color: #ffffff;
    padding: 60px 30px;
    text-align: center;
    border-bottom: 1px solid #e0e0e0;
    position: relative;
    overflow: hidden;
  }

  header h1 {
    margin: 0;
    font-size: 48px;
    font-weight: 800;
    color: #1e90ff;
    animation: fadeInDown 1s ease-out;
  }

  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-30px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* メインコンテンツ */
  #app {
    max-width: 1400px;
    margin: 50px auto;
    padding: 0 30px;
  }

  /* ボタン */
  button {
    background-color: #1e90ff;
    color: #ffffff;
    border: none;
    border-radius: 8px;
    padding: 14px 24px;
    font-size: 16px;
    cursor: pointer;
    margin: 12px 0;
    transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
    display: inline-flex;
    align-items: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  button:hover {
    background-color: #1c86ee;
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  }

  button i {
    margin-right: 10px;
  }

  /* 入力フィールド */
  .input-group {
    display: flex;
    flex-direction: column;
    margin-bottom: 25px;
    animation: fadeInUp 0.5s ease-out;
  }

  .input-group label {
    margin-bottom: 8px;
    font-weight: 600;
    color: #333333;
    font-size: 16px;
  }

  .input-group input,
  .input-group textarea,
  .input-group select {
    width: 100%;
    padding: 16px 24px;
    border: 1px solid #dcdcdc;
    border-radius: 8px;
    font-size: 16px;
    background-color: #ffffff;
    transition: border-color 0.3s, box-shadow 0.3s;
  }

  .input-group input:focus,
  .input-group textarea:focus,
  .input-group select:focus {
    border-color: #1e90ff;
    box-shadow: 0 0 8px rgba(30, 144, 255, 0.3);
    outline: none;
  }

  .input-group .helper-text {
    margin-top: 5px;
    font-size: 14px;
    color: #888888;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* チームリスト */
  .team-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 25px;
    margin-top: 30px;
    animation: fadeIn 1s ease-out;
  }

  .team-item {
    background-color: #ffffff;
    padding: 25px;
    border-radius: 16px;
    cursor: pointer;
    transition: box-shadow 0.3s, transform 0.3s;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .team-item:hover {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    transform: translateY(-5px);
  }

  .team-item h3 {
    margin-top: 0;
    font-size: 24px;
    font-weight: 700;
    color: #1e90ff;
    transition: color 0.3s;
  }

  .team-item h3:hover {
    color: #1c86ee;
  }

  .team-item p {
    margin: 12px 0;
    color: #555555;
    font-size: 16px;
    line-height: 1.6;
  }

  /* ゲームリスト */
  .game-list {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 20px;
    justify-content: center;
    animation: fadeIn 1s ease-out;
  }

  .game-item {
    background-color: #e0e0e0;
    padding: 18px 24px;
    border-radius: 8px;
    text-align: center;
    font-size: 18px;
    color: #333333;
    cursor: pointer;
    transition: transform 0.3s ease-in-out, background-color 0.3s, box-shadow 0.3s;
    position: relative;
    overflow: hidden;
    flex: 1 1 120px;
  }

  .game-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.3);
    transform: skewX(-45deg);
    transition: left 0.5s;
  }

  .game-item:hover::before {
    left: 100%;
  }

  .game-item:hover {
    background-color: #c0c0c0;
    transform: scale(1.05);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
  }

  /* モーダル */
  .modal {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 9999;
    animation: fadeIn 0.3s ease-out;
  }

  .modal-content {
    background-color: #ffffff;
    padding: 40px;
    width: 90%;
    max-width: 800px;
    border-radius: 16px;
    position: relative;
    animation: slideDown 0.5s ease-out;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
  }

  .close-button {
    position: absolute;
    top: 20px;
    right: 20px;
    color: #aaaaaa;
    font-size: 32px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.3s;
  }

  .close-button:hover {
    color: #000000;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-30px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* その他のスタイル */
  .joined-message {
    background-color: #d1ecf1;
    color: #0c5460;
    padding: 18px;
    border-radius: 8px;
    font-weight: 600;
    margin-top: 25px;
    display: flex;
    align-items: center;
    animation: fadeIn 0.5s ease-out;
  }

  .joined-message span {
    margin-left: 12px;
  }

  .member-introductions {
    margin-top: 25px;
    animation: fadeIn 1s ease-out;
  }

  .member-introductions li {
    list-style: none;
    padding: 18px;
    border-bottom: 1px solid #e0e0e0;
    transition: background-color 0.3s;
    cursor: pointer;
  }

  .member-introductions li:hover {
    background-color: #f5f5f5;
  }

  .member-introductions strong {
    display: block;
    font-size: 20px;
    color: #333333;
  }

  /* メッセージセクション */
  .messages {
    margin-top: 25px;
    border-top: 1px solid #e0e0e0;
    padding-top: 25px;
    animation: fadeIn 1s ease-out;
  }

  .messages h3 {
    font-size: 22px;
    margin-bottom: 12px;
    color: #1e90ff;
  }

  .message-list {
    max-height: 350px;
    overflow-y: auto;
    margin-bottom: 20px;
    padding-right: 15px;
    animation: fadeIn 1s ease-out;
  }

  .message {
    margin-bottom: 12px;
    display: flex;
    align-items: center;
  }

  .message .sender {
    font-weight: 600;
    color: #1e90ff;
    margin-right: 12px;
    min-width: 90px;
  }

  .message .content {
    background-color: #f1f0f0;
    padding: 10px 16px;
    border-radius: 8px;
    max-width: 75%;
    word-wrap: break-word;
    transition: background-color 0.3s;
  }

  .message .content:hover {
    background-color: #e2e2e2;
  }

  .message-input {
    display: flex;
    animation: fadeIn 1s ease-out;
  }

  .message-input input[type="text"] {
    flex: 1;
    margin-right: 12px;
    border: 1px solid #dcdcdc;
    border-radius: 8px;
    padding: 12px 18px;
    font-size: 16px;
    transition: border-color 0.3s, box-shadow 0.3s;
  }

  .message-input input[type="text"]:focus {
    border-color: #28a745;
    box-shadow: 0 0 5px rgba(40, 167, 69, 0.5);
    outline: none;
  }

  .message-input button {
    background-color: #28a745;
    transition: background-color 0.3s, transform 0.3s;
  }

  .message-input button:hover {
    background-color: #218838;
    transform: translateY(-2px);
  }

  /* マップ */
  #main-map {
    height: 500px;
    margin-top: 30px;
    border-radius: 16px;
    overflow: hidden;
    animation: fadeIn 1s ease-out;
  }

  #create-team-map {
    height: 400px;
    margin-top: 25px;
    border-radius: 16px;
    overflow: hidden;
    animation: fadeIn 1s ease-out;
  }

  /* プロフィールカード */
  .profile-card {
    background-color: #ffffff;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    margin-bottom: 30px;
    animation: fadeIn 1s ease-out;
  }

  .profile-card h2 {
    font-size: 28px;
    margin-bottom: 15px;
    color: #1e90ff;
  }

  .profile-card p {
    font-size: 18px;
    color: #555555;
    line-height: 1.8;
  }

  /* レスポンシブデザイン */
  @media screen and (max-width: 768px) {
    nav .logo {
      font-size: 24px;
    }

    nav .nav-links button {
      font-size: 14px;
      margin-left: 12px;
    }

    header h1 {
      font-size: 36px;
    }

    .modal-content {
      padding: 25px;
    }

    .team-item h3 {
      font-size: 20px;
    }

    .team-item p {
      font-size: 14px;
    }

    button {
      font-size: 14px;
      padding: 10px 18px;
    }

    .message .sender {
      font-size: 14px;
      min-width: 70px;
    }

    .message .content {
      font-size: 14px;
      max-width: 80%;
    }

    .messages h3 {
      font-size: 20px;
    }

    .input-group label {
      font-size: 14px;
    }

    .input-group input,
    .input-group textarea,
    .input-group select {
      font-size: 14px;
      padding: 10px 16px;
    }

    .game-list {
      justify-content: flex-start;
    }

    .game-item {
      flex: 1 1 100px;
    }
  }

  /* タイマースタイル */
  .timer {
    font-size: 20px;
    color: #ff4500;
    font-weight: bold;
    margin-top: 15px;
  }

  /* レビューセクション */
  .reviews {
    margin-top: 25px;
    border-top: 1px solid #e0e0e0;
    padding-top: 25px;
    animation: fadeIn 1s ease-out;
  }

  .reviews h3 {
    font-size: 22px;
    margin-bottom: 12px;
    color: #1e90ff;
  }

  .review-list {
    max-height: 350px;
    overflow-y: auto;
    margin-bottom: 20px;
    padding-right: 15px;
    animation: fadeIn 1s ease-out;
  }

  .review {
    margin-bottom: 12px;
    border-bottom: 1px solid #e0e0e0;
    padding-bottom: 10px;
  }

  .review strong {
    color: #1e90ff;
    font-size: 16px;
  }

  .review p {
    margin: 6px 0;
    font-size: 16px;
    color: #555555;
  }

  /* プロフィールグラフ */
  .profile-graph {
    margin-top: 25px;
  }

  /* 異世界転生風ステータス */
  .status-display {
    background-color: #f9f9f9;
    padding: 25px;
    border-radius: 16px;
    margin-top: 25px;
    font-family: 'Courier New', Courier, monospace;
    color: #333333;
    animation: fadeIn 1s ease-out;
  }

  .status-display h3 {
    margin-bottom: 15px;
    font-size: 26px;
    color: #1e90ff;
  }

  .status-display p {
    line-height: 1.8;
    font-size: 18px;
  }

  /* 他のユーザーのプロフィール表示 */
  .other-profiles {
    margin-top: 25px;
  }

  .other-profile-card {
    background-color: #ffffff;
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    margin-bottom: 25px;
    animation: fadeIn 1s ease-out;
    cursor: pointer;
    transition: transform 0.3s, box-shadow 0.3s;
  }

  .other-profile-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }

  .other-profile-card h3 {
    font-size: 22px;
    color: #1e90ff;
    margin-bottom: 12px;
  }

  .other-profile-card p {
    font-size: 16px;
    color: #555555;
  }

  /* ビューナビゲーションボタンのスタイル */
  .view-buttons {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    background-color: rgba(255, 255, 255, 0.95);
    border-radius: 40px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    padding: 12px 30px;
    z-index: 1000;
  }

  .view-buttons button {
    background-color: #1e90ff;
    color: #ffffff;
    border: none;
    border-radius: 25px;
    padding: 12px 20px;
    font-size: 16px;
    cursor: pointer;
    margin: 0 8px;
    transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
    display: flex;
    align-items: center;
  }

  .view-buttons button:hover {
    background-color: #1c86ee;
    transform: translateY(-3px);
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.15);
  }

  .view-buttons button.active {
    background-color: #1c86ee;
  }

  .view-buttons button i {
    margin-right: 6px;
  }
</style>

<body>

  <!-- ヘッダー -->
  <header id="top">
    <h1>ゲームコネクト</h1>
    <h3>"日本のボードゲーム（Board）"を新しく"イノベーション"させる</h3>
  </header>

  <!-- メインコンテンツ -->
  <div id="app">
    <!-- 現在のビューを表示 -->

    <component :is="currentView" ref="teamManagerComponent" :user="user" @user-updated="updateUser"
      @profile-updated="updateProfile"></component>


    <!-- ビューナビゲーションボタン[下部のボタン] -->
    <div class="view-buttons">

      <!-- チーム作成ボタン -->
      <button :class="{ active: currentView === 'team-manager' }" @click="setView('team-manager', true)">
        <i class="fas fa-plus-circle"></i>
      </button>

      <button :class="{ active: currentView === 'team-manager' }" @click="setView('team-manager')">
        <i class="fas fa-users"></i>
      </button>

      <button :class="{ active: currentView === 'user-profile' }" @click="setView('user-profile')">
        <i class="fas fa-user"></i>
      </button>

    </div>
  </div>

  <script>
                                                                                                                                                                                                                                                                                      irebase設定
        t firebaseConfig = {
                                                                                                                                                                                                                                                                                        ey: "AIzaSyDLdnq-y-vp-Nkg3oz5Ji-UHCYYILkP44E",
                                                                                                                                                                                                                                                                                        Domain: "melo-e86ab.firebaseapp.com",
                                                                                                                                                                                                                                                                                        ectId: "melo-e86ab",
                                                                                                                                                                                                                                                                                        baseURL: "https://melo-e86ab-default-rtdb.firebaseio.com/",
                                                                                                                                                                                                                                                                                        ageBucket: "melo-e86ab.appspot.com",
                                                                                                                                                                                                                                                                                        agingSenderId: "952197722512",
                                                                                                                                                                                                                                                                                        d: "1:952197722512:web:1de85fc56b2cec8cb58315",
                                                                                                                                                                                                                                                                                        irebase初期化
        base.initializeApp(firebaseConfig);
                                                                                                                                                                                                                                                                                        t auth = firebase.auth();
                                                                                                                                                                                                                                                                                        t db = firebase.database();

                                                                                                                                                                                                                                                                                        ueアプリケーション
        t appVue = Vue.createApp({
          () {
                                                                                                                                                                                                                                                                                          rn {
              : null,
                                                                                                                                                                                                                                                                                          ile: {
                                                                                                                                                                                                                                                                                            oduction: '',
                                                                                                                                                                                                                                                                                            icipationCount: 0,
                                                                                                                                                                                                                                                                                            ng: 0
                           entView: 'user-auth' // デフォルトビューを認証に設定
                              ods: {
                                                                                                                                                                                                                                                                                              teUser(user) {
              .user = user;
                                                                                                                                                                                                                                                                                              ーザーがログインしたら自動でプロフィールビューに切り替える
              user) {
                .currentView = 'user-profile';
              se {
                .currentView = 'user-auth';
                                                                                                                                                                                                                                                                                          teProfile(profile) {
              .profile = profile;
                                                                                                                                                                                                                                                                                            iew(view, createTeam = false) {
                                                                                                                                                                                                                                                                                              ーザーがログインしている場合のみ切り替え
                                                                                                                                                                                                                                                                                              view !== 'user-auth' && !this.user) {
                                                                                                                                                                                                                                                                                                t('まずログインしてください。');
                                                                                                                                                                                                                                                                                                rn;
                          .currentView = view;

                                                                                                                                                                                                                                                                                                ーム作成モーダルを表示する場合
              createTeam) {
                .$nextTick(() => {
                  .$refs.teamManagerComponent.openCreateTeamModal();
                                                                                                                                                                                                                                                                                                  llToSection(sectionId) {
              t section = document.getElementById(sectionId);
              section) {
                                                                                                                                                                                                                                                                                                    ion.scrollIntoView({ behavior: 'smooth' });
                                                                                                                                                                                                                                                                                                    ted() {
            .onAuthStateChanged((user) => {
              .updateUser(user);

                                                                                                                                                                                                                                                                                                      ーザー認証コンポーネント
                                                                                                                                                                                                                                                                                                      ue.component('user-auth', {
                                                                                                                                                                                                                                                                                                        late: `
                <div class="authentication-view">
                    <div v-if="!user" class="profile-card">
                        <h2>ログイン</h2>
                        <button @click="googleSignIn"><i class="fab fa-google"></i> Googleでサインイン</button>
                    </div>
                    <div v-else class="profile-card">
                        <p><strong>{{ user.displayName }}</strong> さん、ようこそ！</p>
                        <button @click="signOut"><i class="fas fa-sign-out-alt"></i> サインアウト</button>
                    </div>
                </div>
            `,
          () {
                                                                                                                                                                                                                                                                                                        rn {
              : null
                              ods: {
                                                                                                                                                                                                                                                                                                        leSignIn() {
              t provider = new firebase.auth.GoogleAuthProvider();
                                                                                                                                                                                                                                                                                                          base.auth().signInWithPopup(provider).then(result => {
                .user = result.user;
                .$emit('user-updated', this.user);

                                                                                                                                                                                                                                                                                                        ーザーの displayName をデータベースに保存
                t userProfileRef = db.ref(`userProfiles/${this.user.uid}`);
                                                                                                                                                                                                                                                                                                        ProfileRef.update({
                                                                                                                                                                                                                                                                                                          layName: this.user.displayName
                              atch(error => {
                                                                                                                                                                                                                                                                                                            ole.error("認証エラー: ", error);
                                                                                                                                                                                                                                                                                                          t('認証に失敗しました。再度お試しください。');
                                     Out() {
                                                                                                                                                                                                                                                                                                            base.auth().signOut().then(() => {
                .user = null;
                .$emit('user-updated', this.user);
                                                                                                                                                                                                                                                                                                          atch(error => {
                                                                                                                                                                                                                                                                                                            ole.error("サインアウトエラー: ", error);
                                                                                                                                                                                                                                                                                                          t('サインアウトに失敗しました。再度お試しください。');
                                           ted() {
                                                                                                                                                                                                                                                                                                            base.auth().onAuthStateChanged(user => {
              .user = user;
              .$emit('user-updated', this.user);

                                                                                                                                                                                                                                                                                                          ーザープロフィールコンポーネント
        ーザープロフィールコンポーネント
        ue.component('user-profile', {
                                                                                                                                                                                                                                                                                                            s: ['user'],
          () {
                                                                                                                                                                                                                                                                                                            rn {
                                                                                                                                                                                                                                                                                                            ile: {
                                                                                                                                                                                                                                                                                                              oduction: '',
                                                                                                                                                                                                                                                                                                              icipationCount: 0,
                                                                                                                                                                                                                                                                                                              ng: 0,
                                                                                                                                                                                                                                                                                                              l: 1,
                                                                                                                                                                                                                                                                                                              rience: 0,
                                                                                                                                                                                                                                                                                                              ngth: 10,
                                                                                                                                                                                                                                                                                                              ity: 10,
                                                                                                                                                                                                                                                                                                              lligence: 10,
                                                                                                                                                                                                                                                                                                              s: [] // 所有しているゲームのリスト
                           ame: '', // 新しく追加するゲーム
                                                                                                                                                                                                                                                                                                              iting: false,
                                                                                                                                                                                                                                                                                                              ileLoaded: false,
                                                                                                                                                                                                                                                                                                              rProfiles: [],
                                                                                                                                                                                                                                                                                                              OtherProfileModal: false,
                                                                                                                                                                                                                                                                                                              ctedProfile: null
                              ods: {
                                                                                                                                                                                                                                                                                                                c fetchProfile() {
                                                                                                                                                                                                                                                                                                                  {
                t userProfileRef = db.ref(`userProfiles/${this.user.uid}`);
                                                                                                                                                                                                                                                                                                                    ProfileRef.once('value', (snapshot) => {
                                                                                                                                                                                                                                                                                                                      snapshot.exists()) {
                    .profile = snapshot.val();
                    .setDefaultProfileValues(this.profile);
                                                                                                                                                                                                                                                                                                                se {
                    .initializeProfile();
                                  .profileLoaded = true;
                                                                                                                                                                                                                                                                                                            tch(error) {
                                                                                                                                                                                                                                                                                                              ole.error("Error fetching profile:", error);
                                                                                                                                                                                                                                                                                                              efaultProfileValues(profile) {
                                                                                                                                                                                                                                                                                                                !profile.displayName) profile.displayName = this.user.displayName || '';
                                                                                                                                                                                                                                                                                                          profile.participationCount === undefined) profile.participationCount = 0;
                                                                                                                                                                                                                                                                                                        profile.rating === undefined) profile.rating = 0;
                                                                                                                                                                                                                                                                                                      !profile.level) profile.level = 1;
                                                                                                                                                                                                                                                                                                      !profile.experience) profile.experience = 0;
                                                                                                                                                                                                                                                                                                      !profile.strength) profile.strength = 10;
                                                                                                                                                                                                                                                                                                      !profile.agility) profile.agility = 10;
                                                                                                                                                                                                                                                                                                      !profile.intelligence) profile.intelligence = 10;
                                                                                                                                                                                                                                                                                                      !profile.games) profile.games = [];
                                                                                                                                                                                                                                                                                                      ializeProfile() {
              .profile = {
                                                                                                                                                                                                                                                                                                          layName: this.user.displayName || '',
                                                                                                                                                                                                                                                                                                          oduction: '',
                                                                                                                                                                                                                                                                                                          icipationCount: 0,
                                                                                                                                                                                                                                                                                                          ng: 0,
                                                                                                                                                                                                                                                                                                          l: 1,
                                                                                                                                                                                                                                                                                                          rience: 0,
                                                                                                                                                                                                                                                                                                          ngth: 10,
                                                                                                                                                                                                                                                                                                          ity: 10,
                                                                                                                                                                                                                                                                                                          lligence: 10,
                                                                                                                                                                                                                                                                                                          s: [] // 所有ゲームのデフォルト値
                                    c saveUserProfile() {
                                                                                                                                                                                                                                                                                                            {
                t userProfileRef = db.ref(`userProfiles/${this.user.uid}`);
                t userProfileRef.set(this.profile);
                .isEditing = false;
                                                                                                                                                                                                                                                                                                          t('プロフィールが更新されました');
                .$emit('profile-updated', this.profile);
                                                                                                                                                                                                                                                                                                          tch(error) {
                                                                                                                                                                                                                                                                                                            ole.error("Error saving profile:", error);
                                                                                                                                                                                                                                                                                                            leEdit() {
                                                                                                                                                                                                                                                                                                              this.isEditing) {
                .saveUserProfile();
                                                                                                                                                                                                                                                                                                          se {
                .isEditing = true;
                                   c fetchOtherProfiles() {
                                                                                                                                                                                                                                                                                                            {
                t userProfilesRef = db.ref('userProfiles');
                                                                                                                                                                                                                                                                                                              ProfilesRef.once('value', (snapshot) => {
                  t profilesData = snapshot.val();
                  .otherProfiles = [];
                                                                                                                                                                                                                                                                                                                (let uid in profilesData) {
                                                                                                                                                                                                                                                                                                                uid !== this.user.uid) {
                      t profile = profilesData[uid];
                                                                                                                                                                                                                                                                                                                  ile.uid = uid;
                      .otherProfiles.push(profile);
                                                                                                                                                                                                                                                                                                                  tch(error) {
                                                                                                                                                                                                                                                                                                                    ole.error("Error fetching other profiles:", error);
                                                                                                                                                                                                                                                                                                                    OtherProfile(profile) {
              .selectedProfile = profile;
              .showOtherProfileModal = true;
                                                                                                                                                                                                                                                                                                                      eOtherProfileModal() {
              .showOtherProfileModal = false;
              .selectedProfile = null;
                                                                                                                                                                                                                                                                                                                        ame() {
                                                                                                                                                                                                                                                                                                                          this.newGame.trim()) {
                .profile.games.push(this.newGame.trim());
                .newGame = ''; // フィールドをクリア
                .saveUserProfile(); // プロフィールを即座に保存
                                                                                                                                                                                                                                                                                                                            veGame(index) {
              .profile.games.splice(index, 1);
              .saveUserProfile(); // 削除後に即座に保存
                                                                                                                                                                                                                                                                                                                              ted() {
            .fetchProfile();
            .fetchOtherProfiles();
                                                                                                                                                                                                                                                                                                                                reDestroy() {
            t userProfileRef = db.ref(`userProfiles/${this.user.uid}`);
                                                                                                                                                                                                                                                                                                                                  ProfileRef.off(); // Firebaseのリスナーを解除
                                                                                                                                                                                                                                                                                                                                  late: `
        <div class="profile-view profile-card">
            <h2>自己紹介</h2>
            <div v-if="profileLoaded">
                <p v-if="!isEditing"><strong>{{ profile.displayName }}</strong>: {{ profile.introduction }}</p>
                <div v-else>
                    <div class="input-group">
                        <label for="displayName">名前</label>
                        <input id="displayName" v-model="profile.displayName" type="text" placeholder="名前を入力">
                        <small class="helper-text">あなたの表示名を入力してください。</small>
                    </div>
                    <div class="input-group">
                        <label for="introduction">自己紹介</label>
                        <textarea id="introduction" v-model="profile.introduction" placeholder="自己紹介を入力"></textarea>
                        <small class="helper-text">自分を簡単に紹介してください。</small>
                    </div>
                    <div class="input-group">
                        <label for="strength">力</label>
                        <input id="strength" v-model.number="profile.strength" type="number" min="0" max="100" placeholder="0〜100">
                        <small class="helper-text">キャラクターの力のステータスを入力してください。</small>
                    </div>
                    <div class="input-group">
                        <label for="agility">敏捷性</label>
                        <input id="agility" v-model.number="profile.agility" type="number" min="0" max="100" placeholder="0〜100">
                        <small class="helper-text">キャラクターの敏捷性のステータスを入力してください。</small>
                    </div>
                    <div class="input-group">
                        <label for="intelligence">知性</label>
                        <input id="intelligence" v-model.number="profile.intelligence" type="number" min="0" max="100" placeholder="0〜100">
                        <small class="helper-text">キャラクターの知性のステータスを入力してください。</small>
                    </div>
                    
                    <!-- 所有ゲーム編集 -->
                    <div class="input-group">
                        <label for="games">所有しているゲーム</label>
                        <ul>
                            <li v-for="(game, index) in profile.games" :key="index">
                                {{ game }} <button @click="removeGame(index)">削除</button>
                            </li>
                        </ul>
                        <input v-model="newGame" type="text" placeholder="新しいゲームを追加">
                        <button @click="addGame">追加</button>
                    </div>

                    <button @click="toggleEdit"><i class="fas fa-save"></i> 保存</button>
                </div>
                <button v-if="!isEditing" @click="toggleEdit"><i class="fas fa-edit"></i> 編集する</button>
            </div>

            <p v-else>読み込み中...</p>

            <!-- 異世界転生風ステータス -->
            <div class="status-display" v-if="profileLoaded">
                <h3>ステータス</h3>
                <p>
                    【名前】：{{ profile.displayName }}<br>
                    【レベル】：{{ profile.level }}<br>
                    【経験値】：{{ profile.experience }}<br>
                    【力】：{{ profile.strength }}<br>
                    【敏捷性】：{{ profile.agility }}<br>
                    【知性】：{{ profile.intelligence }}<br>
                    【所有しているゲーム】：{{ profile.games.join(', ') }}
                </p>
            </div>

            <!-- 他のユーザーのプロフィール -->
            <div class="other-profiles">
                <h3>他のユーザーの自己紹介</h3>
                <div v-for="otherProfile in otherProfiles" :key="otherProfile.uid" class="other-profile-card" @click="openOtherProfile(otherProfile)">
                    <h3>{{ otherProfile.displayName }}</h3>
                    <p>{{ otherProfile.introduction }}</p>
                </div>
            </div>

            <!-- 他のユーザーのプロフィールモーダル -->
            <div class="modal" v-if="showOtherProfileModal">
                <div class="modal-content">
                    <span class="close-button" @click="closeOtherProfileModal">&times;</span>
                    <h2>{{ selectedProfile.displayName }}さんのプロフィール</h2>
                    <p>{{ selectedProfile.introduction }}</p>
                    <div class="status-display">
                        <h3>ステータス</h3>
                        <p>
                            【名前】：{{ selectedProfile.displayName }}<br>
                            【レベル】：{{ selectedProfile.level }}<br>
                            【経験値】：{{ selectedProfile.experience }}<br>
                            【力】：{{ selectedProfile.strength }}<br>
                            【敏捷性】：{{ selectedProfile.agility }}<br>
                            【知性】：{{ selectedProfile.intelligence }}<br>
                            【所有しているゲーム】：{{ selectedProfile.games.join(', ') }}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    `

                                                                                                                                                                                                                                                                                                                                  ーム管理コンポーネント
                                                                                                                                                                                                                                                                                                                                  ue.component('team-manager', {
                                                                                                                                                                                                                                                                                                                                    s: ['user'],
          () {
                                                                                                                                                                                                                                                                                                                                    rn {
                                                                                                                                                                                                                                                                                                                                    Name: '',
                                                                                                                                                                                                                                                                                                                                    Participants: '',  // 参加人数
                                                                                                                                                                                                                                                                                                                                    Requirements: '',  // 参加要件
                                                                                                                                                                                                                                                                                                                                    Game: '',  // ゲーム名
                                                                                                                                                                                                                                                                                                                                    Memo: '', // チームの詳細メモ
                                                                                                                                                                                                                                                                                                                                    tDate: '', // 日程開始
                                                                                                                                                                                                                                                                                                                                    tTime: '', // 開始時間
                                                                                                                                                                                                                                                                                                                                    ate: '', // 日程終了
                                                                                                                                                                                                                                                                                                                                    ime: '', // 終了時間
                                                                                                                                                                                                                                                                                                                                    s: [],
                                                                                                                                                                                                                                                                                                                                    Joined: false,
                                                                                                                                                                                                                                                                                                                                    Profile: null,
                                                                                                                                                                                                                                                                                                                                    edTeams: [], // 参加済みのチームを管理するリスト
                                                                                                                                                                                                                                                                                                                                    Map: null,
                                                                                                                                                                                                                                                                                                                                    MapMarkers: [],
                                                                                                                                                                                                                                                                                                                                    teTeamMap: null,
                                                                                                                                                                                                                                                                                                                                    teTeamMarker: null,
                                                                                                                                                                                                                                                                                                                                    teTeamLocation: null, // チーム作成時の開催場所
                                                                                                                                                                                                                                                                                                                                    CreateTeamModal: false,
                                                                                                                                                                                                                                                                                                                                    TeamDetailModal: false,
                                                                                                                                                                                                                                                                                                                                    ctedTeam: null,
                                                                                                                                                                                                                                                                                                                                    eatingTeam: false, // チーム作成中のフラグ
                                                                                                                                                                                                                                                                                                                                    ages: [],
                                                                                                                                                                                                                                                                                                                                    essage: '',
                                                                                                                                                                                                                                                                                                                                    ews: [],
                                                                                                                                                                                                                                                                                                                                    eview: '',
                                                                                                                                                                                                                                                                                                                                    s: ['ボードゲーム', 'カードゲーム', 'TRPG', 'パズル', '戦略ゲーム', 'ダイスゲーム', 'クイズゲーム', 'パーティーゲーム'],
                                                                                                                                                                                                                                                                                                                                    tdownInterval: null,
                                                                                                                                                                                                                                                                                                                                    iningTime: ''
                              ods: {
                                                                                                                                                                                                                                                                                                                                      c createTeam() {
                                                                                                                                                                                                                                                                                                                                        this.teamName && this.teamParticipants && this.teamRequirements && this.teamGame && this.createTeamLocation && this.startDate && this.startTime && this.endDate && this.endTime) {
                                                                                                                                                                                                                                                                                                                                    this.isCreatingTeam) return; // 二重作成防止
                .isCreatingTeam = true;

                                                                                                                                                                                                                                                                                                                                    程の組み合わせを生成
                t startDateTime = `${this.startDate}T${this.startTime}:00`;
                t endDateTime = `${this.endDate}T${this.endTime}:00`;

                t db.ref('teams').push({
                  : this.teamName,
                                                                                                                                                                                                                                                                                                                                      icipants: parseInt(this.teamParticipants), // 数値として保存
                                                                                                                                                                                                                                                                                                                                      irements: this.teamRequirements,
                  : this.teamGame,
                  : this.teamMemo, // 詳細メモを追加
                                                                                                                                                                                                                                                                                                                                      tDateTime: startDateTime, // 開始日時
                                                                                                                                                                                                                                                                                                                                      ateTime: endDateTime, // 終了日時
                                                                                                                                                                                                                                                                                                                                      ers: [this.user.uid],
                                                                                                                                                                                                                                                                                                                                      entParticipants: 1, // 初回参加者
                  : this.user.uid, // 主催者のUIDを追加
                                                                                                                                                                                                                                                                                                                                      tion: this.createTeamLocation, // 緯度・経度を保存
                                                                                                                                                                                                                                                                                                                                      ews: {} // レビューの初期化
                
                ォームをリセット
                .teamName = '';
                .teamParticipants = '';
                .teamRequirements = '';
                .teamGame = '';
                .teamMemo = '';
                .startDate = '';
                .startTime = '';
                .endDate = '';
                .endTime = '';
                .createTeamLocation = null;
                                                                                                                                                                                                                                                                                                                                      this.createTeamMarker) {
                  .createTeamMap.removeLayer(this.createTeamMarker);
                  .createTeamMarker = null;
                              .showCreateTeamModal = false;
                .isCreatingTeam = false;

                                                                                                                                                                                                                                                                                                                                      ージを再読み込み
                                                                                                                                                                                                                                                                                                                                      ow.location.reload();
              se {
                                                                                                                                                                                                                                                                                                                                        t('全てのフィールドと開催場所を入力してください。');
                                   c fetchTeams() {
              t teamsRef = db.ref('teams');
                                                                                                                                                                                                                                                                                                                                          sRef.off(); // 既存のリスナーを解除
                                                                                                                                                                                                                                                                                                                                          sRef.on('value', async (snapshot) => {
                .teams = [];
                .joinedTeams = []; // リセット

                t teamsData = snapshot.val();
                teamsData) {
                  t teamKeys = Object.keys(teamsData);
                                                                                                                                                                                                                                                                                                                                            (let key of teamKeys) {
                    t team = teamsData[key];
                    .id = key;
                    .memberProfiles = [];

                                                                                                                                                                                                                                                                                                                                              team.members && team.members.length > 0) {
                                                                                                                                                                                                                                                                                                                                                ンバー全員のプロフィールを取得
                      t profilePromises = team.members.map(uid => db.ref(`userProfiles/${uid}`).once('value'));
                                                                                                                                                                                                                                                                                                                                                {
                        t snapshots = await Promise.all(profilePromises);
                                                                                                                                                                                                                                                                                                                                                  shots.forEach(snap => {
                                                                                                                                                                                                                                                                                                                                                    snap.exists()) {
                            .memberProfiles.push(snap.val());
                                                                                                                                                                                                                                                                                                                                                    tch(error) {
                                                                                                                                                                                                                                                                                                                                                      ole.error("メンバープロフィール取得エラー: ", error);
                                                                                                                                                                                                                                                                                                                                                      ーザーがこのチームに参加しているか確認
                                                                                                                                                                                                                                                                                                                                                      team.members.includes(this.user.uid)) {
                        .joinedTeams.push(team.id);
                                                           .teams.push(team);
                                                                                                                                                                                                                                                                                                                                                        ーカーを更新
                                                                                                                                                                                                                                                                                                                                                          .updateMainMapMarkers();
                                     c joinTeam(teamId) {
              t teamRef = db.ref(`teams/${teamId}`);
              t teamDoc = await teamRef.once('value');
              t teamData = teamDoc.val();

              teamData) {
                t members = teamData.members || [];
                t currentParticipants = teamData.currentParticipants || 0;
                t maxParticipants = teamData.participants || 0;

                                                                                                                                                                                                                                                                                                                                                            ームが締められている場合
                                                                                                                                                                                                                                                                                                                                                            currentParticipants >= maxParticipants) {
                                                                                                                                                                                                                                                                                                                                                              t('このチームは既に満員です。');
                                                                                                                                                                                                                                                                                                                                                              rn;
                                                                                                                                                                                                                                                                                                                                                              ーザーがまだ参加していない場合
                                                                                                                                                                                                                                                                                                                                                              !members.includes(this.user.uid)) {
                                                                                                                                                                                                                                                                                                                                                                ers.push(this.user.uid);
                  t teamRef.update({
                                                                                                                                                                                                                                                                                                                                                                  ers: members,
                                                                                                                                                                                                                                                                                                                                                                  entParticipants: currentParticipants + 1
                  
                  加済みリストに追加
                  .joinedTeams.push(teamId);

                                                                                                                                                                                                                                                                                                                                                                  ロフィールの参加回数を増やす
                  t userProfileRef = db.ref(`userProfiles/${this.user.uid}`);
                                                                                                                                                                                                                                                                                                                                                                  t userProfileRef.transaction(profile => {
                    profile) {
                                                                                                                                                                                                                                                                                                                                                                  ile.participationCount = (profile.participationCount || 0) + 1;
                                                                                                                                                                                                                                                                                                                                                                  rn profile;

                                                                                                                                                                                                                                                                                                                                                                  ームデータを再取得
                  .fetchTeams();

                                                                                                                                                                                                                                                                                                                                                                  ィードバック: 参加フラグを更新
                                                                                                                                                                                                                                                                                                                                                                    .teamJoined = true;

                                                                                                                                                                                                                                                                                                                                                                  t('チームに参加しました！');
                                                 c deleteTeam(teamId) {
                                                                                                                                                                                                                                                                                                                                                                    confirm('本当にこのチームを消去しますか？')) {
                                                                                                                                                                                                                                                                                                                                                                  {
                  t db.ref(`teams/${teamId}`).remove();
                                                                                                                                                                                                                                                                                                                                                                    t('チームが消去されました。');
                  .fetchTeams();
                  .closeTeamDetailModal();
                                                                                                                                                                                                                                                                                                                                                                    tch(error) {
                                                                                                                                                                                                                                                                                                                                                                      ole.error("チーム消去エラー: ", error);
                                                                                                                                                                                                                                                                                                                                                                      t('チームの消去に失敗しました。');
                                                 c fetchUserProfile() {
              t userProfileRef = db.ref(`userProfiles/${this.user.uid}`);
                                                                                                                                                                                                                                                                                                                                                                        ProfileRef.once('value', (snapshot) => {
                                                                                                                                                                                                                                                                                                                                                                          snapshot.exists()) {
                  .userProfile = snapshot.val();
                                                                                                                                                                                                                                                                                                                                                                          oinedTeam(teamId) {
              rn this.joinedTeams.includes(teamId);
                                                                                                                                                                                                                                                                                                                                                                            ializeMainMap() {
                                                                                                                                                                                                                                                                                                                                                                              インマップを初期化
                                                                                                                                                                                                                                                                                                                                                                                .mainMap = L.map('main-map').setView([35.6895, 139.6917], 5); // 初期位置を日本全体に設定

                                                                                                                                                                                                                                                                                                                                                                              SMタイルレイヤーを追加
                                                                                                                                                                                                                                                                                                                                                                              leLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                                                                                                                                                                                                                                                                                                                                                                ibution: '© OpenStreetMap contributors'
              ddTo(this.mainMap);

                                                                                                                                                                                                                                                                                                                                                                              ーカーを更新
                                                                                                                                                                                                                                                                                                                                                                                .updateMainMapMarkers();
                                                                                                                                                                                                                                                                                                                                                                              teMainMapMarkers() {
                                                                                                                                                                                                                                                                                                                                                                                存のマーカーをクリア
                                                                                                                                                                                                                                                                                                                                                                                this.mainMapMarkers) {
                .mainMapMarkers.forEach(marker => this.mainMap.removeLayer(marker));
                          .mainMapMarkers = [];

                                                                                                                                                                                                                                                                                                                                                                                  ームの開催場所にマーカーを追加
                                                                                                                                                                                                                                                                                                                                                                                    .teams.forEach(team => {
                                                                                                                                                                                                                                                                                                                                                                                      team.location) {
                  t marker = L.marker([team.location.lat, team.location.lng]).addTo(this.mainMap);
                  t startDate = new Date(team.startDateTime);
                  t endDate = new Date(team.endDateTime);
                  t options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                                                                                                                                                                                                                                                                                                                                                                                    er.bindPopup(`
                                <strong>${team.name}</strong><br>
                                ゲーム: ${team.game}<br>
                                日程: ${startDate.toLocaleDateString('ja-JP', options)} ～ ${endDate.toLocaleDateString('ja-JP', options)}
                            `);
                  .mainMapMarkers.push(marker);
                                                                                                                                                                                                                                                                                                                                                                                    CreateTeamModal() {
              .showCreateTeamModal = true;
              .$nextTick(() => {
                .initializeCreateTeamMap();
                                                                                                                                                                                                                                                                                                                                                                                      eCreateTeamModal() {
              .showCreateTeamModal = false;
                                                                                                                                                                                                                                                                                                                                                                                        ializeCreateTeamMap() {
                                                                                                                                                                                                                                                                                                                                                                                          存のマップがある場合はリセット
                                                                                                                                                                                                                                                                                                                                                                                          this.createTeamMap) {
                .createTeamMap.off();
                .createTeamMap.remove();
                .createTeamMap = null;
                .createTeamMarker = null;
                .createTeamLocation = null;
                                                                                                                                                                                                                                                                                                                                                                                        ーム作成用のマップを初期化
                                                                                                                                                                                                                                                                                                                                                                                          .createTeamMap = L.map('create-team-map').setView([35.6895, 139.6917], 13); // 初期位置を東京に設定

                                                                                                                                                                                                                                                                                                                                                                                        SMタイルレイヤーを追加
                                                                                                                                                                                                                                                                                                                                                                                        leLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                                                                                                                                                                                                                                                                                                                                                                          ibution: '© OpenStreetMap contributors'
              ddTo(this.createTeamMap);

                                                                                                                                                                                                                                                                                                                                                                                        図をクリックしたときにマーカーを追加
                                                                                                                                                                                                                                                                                                                                                                                          .createTeamMap.on('click', (e) => {
                                                                                                                                                                                                                                                                                                                                                                                            this.createTeamMarker) {
                  .createTeamMarker.setLatLng(e.latlng);
                se {
                  .createTeamMarker = L.marker(e.latlng, { draggable: true }).addTo(this.createTeamMap);
                                                                                                                                                                                                                                                                                                                                                                                            ーカーをドラッグした際に位置を更新
                                                                                                                                                                                                                                                                                                                                                                                              .createTeamMarker.on('dragend', (event) => {
                    t marker = event.target;
                    t position = marker.getLatLng();
                    .createTeamLocation = {
                                                                                                                                                                                                                                                                                                                                                                                                  position.lat,
                                                                                                                                                                                                                                                                                                                                                                                                  position.lng
                                                                                                                                                                                                                                                                                                                                                                                                    .createTeamLocation = {
                                                                                                                                                                                                                                                                                                                                                                                                    e.latlng.lat,
                                                                                                                                                                                                                                                                                                                                                                                                    e.latlng.lng
                                                    TeamDetail(team) {
              .selectedTeam = team;
              .showTeamDetailModal = true;
              .fetchMessages(team.id);
              .fetchReviews(team.id);
              .startCountdown(team.endDateTime);
                                                                                                                                                                                                                                                                                                                                                                                                    eTeamDetailModal() {
              .showTeamDetailModal = false;
              .selectedTeam = null;
              .messages = [];
              .newMessage = '';
              .reviews = [];
              .newReview = '';
              .remainingTime = '';
                                                                                                                                                                                                                                                                                                                                                                                                    this.countdownInterval) {
                                                                                                                                                                                                                                                                                                                                                                                              rInterval(this.countdownInterval);
                .countdownInterval = null;
                                                                                                                                                                                                                                                                                                                                                                                              ッセージ関連
                                                                                                                                                                                                                                                                                                                                                                                              hMessages(teamId) {
              t messagesRef = db.ref(`teams/${teamId}/messages`).orderByChild('timestamp');
                                                                                                                                                                                                                                                                                                                                                                                                agesRef.off(); // 既存のリスナーを解除
                                                                                                                                                                                                                                                                                                                                                                                                agesRef.on('value', (snapshot) => {
                .messages = [];
                t messagesData = snapshot.val();
                messagesData) {
                  t messageKeys = Object.keys(messagesData);
                                                                                                                                                                                                                                                                                                                                                                                                  ageKeys.forEach(key => {
                    t message = messagesData[key];
                    .messages.push(message);
                                                                                                                                                                                                                                                                                                                                                                                                    クロールを一番下に
                                                                                                                                                                                                                                                                                                                                                                                                      .$nextTick(() => {
                  t messageList = this.$el.querySelector('.message-list');
                  messageList) {
                                                                                                                                                                                                                                                                                                                                                                                                      ageList.scrollTop = messageList.scrollHeight;
                                                                                                                                                                                                                                                                                                                                                                                                      Message() {
                                                                                                                                                                                                                                                                                                                                                                                                        this.newMessage.trim() === '') return;
              t teamId = this.selectedTeam.id;
              t messagesRef = db.ref(`teams/${teamId}/messages`);
              t newMessageRef = messagesRef.push();
                                                                                                                                                                                                                                                                                                                                                                                                  essageRef.set({
                                                                                                                                                                                                                                                                                                                                                                                                    erId: this.user.uid,
                                                                                                                                                                                                                                                                                                                                                                                                    erName: this.user.displayName,
                                                                                                                                                                                                                                                                                                                                                                                                    ent: this.newMessage.trim(),
                                                                                                                                                                                                                                                                                                                                                                                                    stamp: firebase.database.ServerValue.TIMESTAMP
                                                                                                                                                                                                                                                                                                                                                                                                      .newMessage = '';
                                                                                                                                                                                                                                                                                                                                                                                                    ビュー関連
            hReviews(teamId) {
              t reviewsRef = db.ref(`teams/${teamId}/reviews`).orderByChild('timestamp');
                                                                                                                                                                                                                                                                                                                                                                                                      ewsRef.off(); // 既存のリスナーを解除
                                                                                                                                                                                                                                                                                                                                                                                                      ewsRef.on('value', (snapshot) => {
                .reviews = [];
                t reviewsData = snapshot.val();
                reviewsData) {
                  t reviewKeys = Object.keys(reviewsData);
                                                                                                                                                                                                                                                                                                                                                                                                    ewKeys.forEach(key => {
                    t review = reviewsData[key];
                    .reviews.push(review);
                                                                                                                                                                                                                                                                                                                                                                                                      Review() {
                                                                                                                                                                                                                                                                                                                                                                                                        this.newReview.trim() === '') return;
              t teamId = this.selectedTeam.id;
              t reviewsRef = db.ref(`teams/${teamId}/reviews`);
              t newReviewRef = reviewsRef.push();
                                                                                                                                                                                                                                                                                                                                                                                                    eviewRef.set({
                                                                                                                                                                                                                                                                                                                                                                                                      ewerId: this.user.uid,
                                                                                                                                                                                                                                                                                                                                                                                                      ewerName: this.user.displayName,
                                                                                                                                                                                                                                                                                                                                                                                                      ent: this.newReview.trim(),
                                                                                                                                                                                                                                                                                                                                                                                                      ng: this.selectedTeam.rating || 0,
                                                                                                                                                                                                                                                                                                                                                                                                      stamp: firebase.database.ServerValue.TIMESTAMP
                                                                                                                                                                                                                                                                                                                                                                                                        .newReview = '';
                                                                                                                                                                                                                                                                                                                                                                                                      t('レビューが投稿されました。');
                       ウントダウン関連
            tCountdown(endDateTime) {
              t endTime = new Date(endDateTime).getTime();
              .updateCountdown(endTime);
              .countdownInterval = setInterval(() => {
                .updateCountdown(endTime);
              000);
                                                                                                                                                                                                                                                                                                                                                                                                    teCountdown(endTime) {
              t now = new Date().getTime();
              t distance = endTime - now;

                                                                                                                                                                                                                                                                                                                                                                                                      distance < 0) {
                                                                                                                                                                                                                                                                                                                                                                                                        rInterval(this.countdownInterval);
                .remainingTime = '終了しました';
              se {
                t days = Math.floor(distance / (1000 * 60 * 60 * 24));
                t hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                t minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                t seconds = Math.floor((distance % (1000 * 60)) / 1000);
                .remainingTime = `${days}日 ${hours}時間 ${minutes}分 ${seconds}秒`;
                                                                                                                                                                                                                                                                                                                                                                                                          erTeamsByGame(selectedGame) {
              t teamsRef = db.ref('teams');
                                                                                                                                                                                                                                                                                                                                                                                                            sRef.off(); // 既存のリスナーを解除
                                                                                                                                                                                                                                                                                                                                                                                                            selectedGame === 'すべて') {
                .fetchTeams();
                                                                                                                                                                                                                                                                                                                                                                                                              rn;
                                                                                                                                                                                                                                                                                                                                                                                                              sRef.orderByChild('game').equalTo(selectedGame).on('value', async (snapshot) => {
                .teams = [];
                .joinedTeams = []; // リセット

                t teamsData = snapshot.val();
                teamsData) {
                  t teamKeys = Object.keys(teamsData);
                                                                                                                                                                                                                                                                                                                                                                                                                (let key of teamKeys) {
                    t team = teamsData[key];
                    .id = key;
                    .memberProfiles = [];

                                                                                                                                                                                                                                                                                                                                                                                                                  team.members && team.members.length > 0) {
                                                                                                                                                                                                                                                                                                                                                                                                                    ンバー全員のプロフィールを取得
                      t profilePromises = team.members.map(uid => db.ref(`userProfiles/${uid}`).once('value'));
                                                                                                                                                                                                                                                                                                                                                                                                                    {
                        t snapshots = await Promise.all(profilePromises);
                                                                                                                                                                                                                                                                                                                                                                                                                      shots.forEach(snap => {
                                                                                                                                                                                                                                                                                                                                                                                                                        snap.exists()) {
                            .memberProfiles.push(snap.val());
                                                                                                                                                                                                                                                                                                                                                                                                                        tch(error) {
                                                                                                                                                                                                                                                                                                                                                                                                                          ole.error("メンバープロフィール取得エラー: ", error);
                                                                                                                                                                                                                                                                                                                                                                                                                          ーザーがこのチームに参加しているか確認
                                                                                                                                                                                                                                                                                                                                                                                                                          team.members.includes(this.user.uid)) {
                        .joinedTeams.push(team.id);
                                                           .teams.push(team);
                                                                                                                                                                                                                                                                                                                                                                                                                            ーカーを更新
                                                                                                                                                                                                                                                                                                                                                                                                                              .updateMainMapMarkers();
                                                                                                                                                                                                                                                                                                                                                                                                                            iew(view) {
              .currentView = view;
                                                                                                                                                                                                                                                                                                                                                                                                                              meEnded(endDateTime) {
              t now = new Date().getTime();
              t endTime = new Date(endDateTime).getTime();
              rn now > endTime;
                                                                                                                                                                                                                                                                                                                                                                                                                                uted: {
                                                                                                                                                                                                                                                                                                                                                                                                                                  eviewed() {
                                                                                                                                                                                                                                                                                                                                                                                                                                    !this.selectedTeam || !this.reviews.length) return false;
              rn this.reviews.some(review => review.reviewerId === this.user.uid);
                                                                                                                                                                                                                                                                                                                                                                                                                                    ted() {
            .fetchTeams();
            .initializeMainMap();
                                                                                                                                                                                                                                                                                                                                                                                                                                      late: `
                <div class="team-view">
                     <h2>開催中のゲームイベント！！</h2>
                     <!-- メインマップ -->
                    <div id="main-map"></div>

                    <h2>ジャンル別検索</h2>
                    <!-- ゲーム別検索 -->
                    <div class="input-group">
                        <label for="gameFilter"><i class="fas fa-gamepad"></i> ゲーム別で検索</label>
                        <select id="gameFilter" @change="filterTeamsByGame($event.target.value)">
                            <option value="すべて">すべて</option>
                            <option v-for="game in games" :key="game" :value="game">{{ game }}</option>
                        </select>
                        <small class="helper-text">参加したいゲームを選択してチームを検索できます。</small>
                    </div>

                    <!-- ゲームリスト -->
                    <div class="game-list">
                        <div v-for="game in games" :key="game" class="game-item" @click="filterTeamsByGame(game)">
                            {{ game }}
                        </div>
                        <div class="game-item" @click="filterTeamsByGame('すべて')">
                            すべて
                        </div>
                    </div>

   
                   <h2>ゲームイベント一覧!!</h2>

                    <!-- チームリスト -->
                    <div class="team-list">
                        <div v-for="team in teams" :key="team.id" class="team-item" @click="openTeamDetail(team)">
                            <h3>{{ team.name }}</h3>
                          
                            <p>
                                <strong>ゲーム:</strong> {{ team.game }}<br>
                                <strong>日程:</strong> {{ new Date(team.startDateTime).toLocaleString('ja-JP', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' }) }} ～ {{ new Date(team.endDateTime).toLocaleString('ja-JP', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' }) }}<br>
                                <strong>参加人数:</strong> {{ team.currentParticipants }} / {{ team.participants }}
                            </p>
                        </div>
                    </div>

                    <!-- チーム詳細モーダル -->
                    <div class="modal" v-if="showTeamDetailModal">
                        <div class="modal-content">
                            <span class="close-button" @click="closeTeamDetailModal">&times;</span>
                            <h2>{{ selectedTeam.name }}</h2>

                                      <div class="timer">
                                残り時間: {{ remainingTime }}
                            </div>

                            <p>
                                <strong>ゲーム:</strong> {{ selectedTeam.game }}<br>
                                <strong>日程:</strong> {{ new Date(selectedTeam.startDateTime).toLocaleString('ja-JP', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' }) }} ～ {{ new Date(selectedTeam.endDateTime).toLocaleString('ja-JP', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' }) }}<br>
                                <strong>参加人数:</strong> {{ selectedTeam.currentParticipants }} / {{ selectedTeam.participants }}<br>
                                <strong>参加要件:</strong> {{ selectedTeam.requirements }}<br>
                                <strong>詳細メモ:</strong> {{ selectedTeam.memo }}
                            </p>

                         

                            <button 
                                v-if="!hasJoinedTeam(selectedTeam.id) && selectedTeam.currentParticipants < selectedTeam.participants" 
                                @click="joinTeam(selectedTeam.id)">
                                <i class="fas fa-user-plus"></i> 参加
                            </button>
                            <button 
                                v-if="!hasJoinedTeam(selectedTeam.id) && selectedTeam.currentParticipants >= selectedTeam.participants"
                                disabled>
                                <i class="fas fa-user-slash"></i> 定員に達しました
                            </button>
                            <div v-else-if="hasJoinedTeam(selectedTeam.id)" class="joined-message">
                                <i class="fas fa-check-circle"></i>
                                <span>参加済みのチームです</span>
                            </div>
                            <!-- 主催者のみチームを消去できるボタンを表示 -->
                            <button 
                                v-if="selectedTeam.host === user.uid" 
                                @click="deleteTeam(selectedTeam.id)" 
                                style="background-color: #dc3545; color: white; margin-top: 15px;">
                                <i class="fas fa-trash-alt"></i> チームを消去
                            </button>
                            <!-- 参加メンバーの自己紹介表示 -->
                            <div v-if="selectedTeam.memberProfiles && selectedTeam.memberProfiles.length > 0">
                                <h3>参加メンバーの自己紹介</h3>
                                <ul class="member-introductions">
                                    <li v-for="(member, index) in selectedTeam.memberProfiles" :key="index">
                                        <strong>{{ member.displayName }}</strong>
                                        <p>{{ member.introduction }}</p>
                                    </li>
                                </ul>
                            </div>
                            <!-- メッセージセクション -->
                            <div class="messages" v-if="selectedTeam.members && selectedTeam.members.includes(user.uid)">
                                <h3>チームチャット</h3>
                                <div class="message-list">
                                    <div v-for="(message, index) in messages" :key="index" class="message">
                                        <span class="sender">{{ message.senderName }}:</span>
                                        <span class="content">{{ message.content }}</span>
                                    </div>
                                </div>
                                <div class="message-input">
                                    <input type="text" v-model="newMessage" @keyup.enter="sendMessage" placeholder="メッセージを入力">
                                    <button @click="sendMessage"><i class="fas fa-paper-plane"></i> 送信</button>
                                </div>
                            </div>
                            <!-- レビューセクション -->
                            <div class="reviews" v-if="isGameEnded(selectedTeam.endDateTime) && hasJoinedTeam(selectedTeam.id)">
                                <h3>レビュー</h3>
                                <div class="review-list">
                                    <div v-for="(review, index) in reviews" :key="index" class="review">
                                        <strong>{{ review.reviewerName }}</strong> - 評価: {{ review.rating }}/5
                                        <p>{{ review.content }}</p>
                                    </div>
                                </div>
                                <div v-if="!hasReviewed">
                                    <div class="input-group">
                                        <label for="reviewContent"><i class="fas fa-comment"></i> レビュー内容</label>
                                        <textarea id="reviewContent" v-model="newReview" placeholder="レビューを入力"></textarea>
                                        <small class="helper-text">ゲーム終了後にレビューを投稿できます。</small>
                                    </div>
                                    <button @click="postReview"><i class="fas fa-paper-plane"></i> レビューを投稿</button>
                                </div>
                                <div v-else>
                                    <p>既にレビューを投稿しています。</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- チーム作成モーダル -->

                    <div class="modal" v-if="showCreateTeamModal">
                        <div class="modal-content">
                            <span class="close-button" @click="closeCreateTeamModal">&times;</span>
                            <h2>チームを作成</h2>
                            <div class="input-group">
                                <label for="teamName"><i class="fas fa-clipboard-list"></i> チーム名</label>
                                <input id="teamName" v-model="teamName" type="text" placeholder="チーム名を入力">
                                <small class="helper-text">他のユーザーに覚えてもらいやすい名前を入力してください。</small>
                            </div>
                            <div class="input-group">
                                <label for="teamParticipants"><i class="fas fa-users"></i> 参加人数</label>
                                <input id="teamParticipants" v-model="teamParticipants" type="number" min="1" placeholder="参加人数を入力">
                                <small class="helper-text">チームに必要な参加人数を入力してください。</small>
                            </div>
                            <div class="input-group">
                                <label for="teamRequirements"><i class="fas fa-info-circle"></i> 参加要件</label>
                                <input id="teamRequirements" v-model="teamRequirements" type="text" placeholder="参加要件を入力">
                                <small class="helper-text">チームに参加するための条件やスキルを入力してください。</small>
                            </div>
                            <div class="input-group">
                                <label for="teamGame"><i class="fas fa-gamepad"></i> ゲーム名</label>
                                <select id="teamGame" v-model="teamGame">
                                    <option disabled value="">ゲームを選択</option>
                                    <option v-for="game in games" :key="game" :value="game">{{ game }}</option>
                                </select>
                                <small class="helper-text">チームが活動するゲームを選択してください。</small>
                            </div>
                            <div class="input-group">
                                <label for="teamMemo"><i class="fas fa-file-alt"></i> 詳細メモ（任意）</label>
                                <textarea id="teamMemo" v-model="teamMemo" placeholder="詳細メモを入力"></textarea>
                                <small class="helper-text">チームの詳細や目的などを自由に記入できます。</small>
                            </div>
                            <div class="input-group">
                                <label for="startDate"><i class="fas fa-calendar-plus"></i> 開始日</label>
                                <input id="startDate" v-model="startDate" type="date">
                                <small class="helper-text">チーム活動の開始日を選択してください。</small>
                            </div>
                            <div class="input-group">
                                <label for="startTime"><i class="fas fa-clock"></i> 開始時間</label>
                                <input id="startTime" v-model="startTime" type="time">
                                <small class="helper-text">チーム活動の開始時間を選択してください。</small>
                            </div>
                            <div class="input-group">
                                <label for="endDate"><i class="fas fa-calendar-minus"></i> 終了日</label>
                                <input id="endDate" v-model="endDate" type="date">
                                <small class="helper-text">チーム活動の終了日を選択してください。</small>
                            </div>
                            <div class="input-group">
                                <label for="endTime"><i class="fas fa-clock"></i> 終了時間</label>
                                <input id="endTime" v-model="endTime" type="time">
                                <small class="helper-text">チーム活動の終了時間を選択してください。</small>
                            </div>
                            <div class="input-group">
                                <label>開催場所</label>
                                <div id="create-team-map"></div>
                                <small class="helper-text">地図をクリックしてチームの開催場所を選択してください。</small>
                            </div>
                            <button @click="createTeam"><i class="fas fa-plus-circle"></i> チームを作成</button>
                        </div>
                    </div>
                </div>
            `

                                                                                                                                                                                                                                                                                                                                                                                                                                      ーム詳細モーダル内の追加機能

                                                                                                                                                                                                                                                                                                                                                                                                                                      ue.mount('#app');
  </script>
</body>

</html>